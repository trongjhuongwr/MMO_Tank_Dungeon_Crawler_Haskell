name:                server
version:             0.1.0.0
description:         The game server for MMO Dungeon Crawler
homepage:            "https://github.com/Sura3607/MMO_Dungeon_Crawler#readme"
github:              "Sura3607/MMO_Dungeon_Crawler"
license:             BSD3
author:              Nguyen Trong Huong, Nguyen Minh Nhut
maintainer:          nguyentronghuong05@gmail.com, nguyenminhnhut3607@gmail.com
copyright:           2025 NTH NMN
category:            Game

# Các thư viện chung mà cả library và executable của server đều dùng
dependencies:
  - base >= 4.7 && < 5
  - bytestring # Xử lý chuỗi byte hiệu quả
  - network    # Thư viện cho lập trình socket
  - binary     # Để mã hóa/giải mã gói tin
  - containers
  - array      # Cho GameMap
  - shared
  - JuicyPixels
  - aeson
  - filepath

# Phần thư viện của server (chứa logic game)
library:
  source-dirs: src
  exposed-modules:
    - Core.Config
    - Core.Logger
    - Core.Settings
    - Core.Types
    - Network.TCPServer
    - Network.UDPServer
    - Network.SessionManager
    - Network.Protocol
    - Network.PacketParser
    - Systems.MapLoader
    - Systems.AISystem
    - Systems.CombatSystem
    - Systems.EffectSystem
    - Systems.EntitySystem
    - Systems.ItemSystem
    - Systems.PartySystem
    - Systems.PhysicsSystem
    - Systems.SkillSystem
    - Systems.SyncSystem
    - Data.Database
    - Data.Queries.PlayerQuery
    - Handlers.LoginHandler
    - Utils.Random
    - GameLoop

# Phần ứng dụng chạy được (entry point)
executables:
  mmo-server:
    main:                Main.hs
    # Thư mục chứa tệp Main.hs
    source-dirs:         app
    # Các tùy chọn cho trình biên dịch GHC, rất quan trọng để bật đa luồng
    ghc-options:
      - -threaded
      - -rtsopts
      - -with-rtsopts=-N
    # Các thư viện mà chỉ riêng file thực thi này cần
    dependencies:
      # Liên kết đến phần library của chính gói 'server' này
      - server